<div class="leftSpacer"></div>
{{>header}}
<div class="container">
  <div class="login-form-container">
    <header>Login</header>
    <form class="login-form" action="/index" method="POST" id="login-form" onsubmit="return validateForm()">
      <input type="text" name="username" id="username" placeholder="Username" required pattern=".{5,}"
        title="Username must be at least 5 characters long">
      <input type="password" name="password" id="password" placeholder="Password" required pattern=".{8,}"
        title="Password must be at least 8 characters long">
      <label>
        <input type="checkbox" id="remember_me" name="remember_me"> Remember me
      </label>
      <div id="captcha-container">
        <!-- CAPTCHA will be dynamically inserted here -->
      </div>
      <input type="submit" id="login-submit" value="Login">
      <div id="error-message" class="error-message"></div>
      <a href="/register">Register</a>
      <a href="/forgotpassword">Forgot Username/Password</a>
      <a href="/adminlogin">Admin Login</a>
    </form>
    <div id="alert-message"></div>
  </div>
</div>
<script src="/js/login.js"></script>
{{>footer}}
<div class="rightSpacer"></div>

<script>
  function validateForm() {
    var username = document.getElementById("username").value;
    var password = document.getElementById("password").value;
    var errorMessage = document.getElementById("error-message");

    errorMessage.textContent = "";

    if (username === "" || password === "") {
      errorMessage.textContent = "Username and Password must be filled out";
      return false;
    }

    // Add more complex validation if needed

    return true;
  }

  // Example CAPTCHA implementation (replace with actual CAPTCHA)
  function loadCaptcha() {
    var captchaContainer = document.getElementById("captcha-container");
    captchaContainer.innerHTML = '<img src="captcha-image-url" alt="CAPTCHA">';
  }

  window.onload = function () {
    loadCaptcha();
  };

  /*
  // option to change between light and dark mode
  // script moved to mode.js
  function changeMode() {
    const modeSelect = document.getElementById("modeSelect");
    const modeStyleSheetLink = document.getElementById("modeStyleSheetLink");
    const currentMode = localStorage.getItem("mode") || "login";

    function setMode(modeName) {
      modeStyleSheetLink.setAttribute("href", `/css/${modeName}.css`);
    }

    modeSelect.addEventListener("change", () => {
      setMode(modeSelect.value);
      localStorage.setItem("mode", modeSelect.value);

    });
    setMode(currentMode);
  }

  changeMode();
*/
</script>